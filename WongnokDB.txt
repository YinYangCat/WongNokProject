CREATE TABLE User(
    UserID VARCHAR(10) PRIMARY KEY,
    Name VARCHAR(50) NOT NULL,
    Password VARCHAR(50) ???HASHED??? NOT NULL,
    Email VARCHAR(50) NOT NULL UNIQUE,
    PhoneNum INT NOT NULL UNIQUE,
    ProfilePic VARCHAR(50), --It's PIC ID so what should I put--
    CONSTRAINT fk_ProfilePhoto
		FOREIGN KEY (ProfilePic) REFERENCES Photo(PhotoID)
		DEFERRABLE INITIALLY DEFERRED
);

CREATE TABLE Restaurants(
    Res_ID VARCHAR(10) PRIMARY KEY,
    Name VARCHAR(50) NOT NULL,
    Phone_no INT UNIQUE,
    Address VARCHAR(100),
    Latitude FLOAT NOT NULL,
    Longtitude FLOAT NOT NULL,
    Avg_Rating FLOAT NOT NULL
);

CREATE TABLE Category(
    CategoryID VARCHAR(10) PRIMARY KEY,
    CategoryName VARCHAR(20) NOT NULL
);

CREATE TABLE Restaurant_Category(
--Join between Restaurant and Category
    Res_ID VARCHAR(10),
    CategoryID VARCHAR(10),
	CONSTRAINT fk_JoinRes
    	FOREIGN KEY (Res_ID) REFERENCES Restaurants(Res_ID)
		DEFERRABLE INITIALLY DEFERRED,
	CONSTRAINT fk_JoinCat
    	FOREIGN KEY (CategoryID) REFERENCES09 Category(CategoryID)
		DEFERRABLE INITIALLY DEFERRED,
);

CREATE TABLE Admin(
    AdminID VARCHAR(10) PRIMARY KEY,
    UserID VARCHAR(10) UNIQUE,
    PermissionLevel INT  NOT NULL,
	CONSTRAINT fk_UserAdmin
    	FOREIGN KEY (UserID) REFERENCES User(UserID)
		DEFERRABLE INITIALLY DEFERRED
);

CREATE TABLE Review(
    ReviewID VARCHAR(10) PRIMARY KEY,
    UserID VARCHAR(10),
    Res_ID VARCHAR(10),
    Rating INT NOT NULL,
    ReviewText VARCHAR(200),
    Timestamp DATE NOT NULL,
	CONSTRAINT fk_UserReview
    	FOREIGN KEY UserID REFERENCES User(UserID)
		DEFERRABLE INITIALLY DEFERRED,
	CONSTRAINT fk_ResReview
    	FOREIGN KEY ResID REFERENCES Restaurants(Res_ID)
		DEFERRABLE INITIALLY DEFERRED
);

CREATE TABLE ReportedReview(
    --For Admin Moderation--
    ReportID VARCHAR(10) PRIMARY KEY,
    ReviewID VARCHAR(10),
    ReportedBy VARCHAR(10),
    Reason VARCHAR(200),--Or we can just do the tick box
    Status INT NOT NULL,--Not sure--
    Timestamp DATE NOT NULL,--Not sure--
	CONSTRAINT fk_RepReview
    	FOREIGN KEY (ReviewID) REFERENCES Review(ReviewID)
		DEFERRABLE INITIALLY DEFERRED,
	CONSTRAINT fk_RepUser
    	FOREIGN KEY (ReportedBy) REFERENCES User(UserID)
		DEFERRABLE INITIALLY DEFERRED
);

CREATE TABLE Photo(
    PhotoID VARCHAR(10) PRIMARY KEY,
    ReviewID VARCHAR(10),
    PhotoURL VARCHAR(200) UNIQUE,
	CONSTRAINT fk_ReviewPhoto
    	FOREIGN KEY (ReviewID) REFERENCES Review(ReviewID)
		DEFERRABLE INITIALLY DEFERRED
);